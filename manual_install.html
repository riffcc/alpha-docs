<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="keywords" content="">

    <title>UNIT3D Documentation</title>

    <!-- Styles -->
    <link href="assets/css/page.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="assets/img/apple-touch-icon.png">
    <link rel="icon" href="assets/img/favicon.png">
</head>

<body>


<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark navbar-stick-dark" data-navbar="sticky">
    <div class="container-fluid">

        <div class="navbar-left">
            <button class="navbar-toggler" type="button">&#9776;</button>
            <a class="navbar-brand" href="index.html">
                <h2 style="color: black; font-weight: 800;">UNIT3D-Docs</h2>
            </a>
        </div>

        <section class="navbar-mobile">
            <span class="navbar-divider d-mobile-none"></span>
            <ul class="nav nav-navbar">
                <li class="nav-item">
                    <a class="nav-link" href="#">UNIT3D <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="intro.html">Introduction</a>
                        <a class="nav-link" href="dir_structure.html">Directory Schema</a>
                        <a class="nav-link" href="#">Database Schema</a>
                        <div class="dropdown-divider"></div>
                        <a class="nav-link" href="achievement_system.html">Achievement System</a>
                        <a class="nav-link" href="article_system.html">Article System</a>
                        <a class="nav-link" href="bonus_system.html">Bonus System</a>
                        <a class="nav-link" href="chat_system.html">Chat System</a>
                        <a class="nav-link" href="forum_system.html">Forum System</a>
                        <a class="nav-link" href="gallery_system.html">Gallery System</a>
                        <a class="nav-link" href="graveyard_system.html">Graveyard System</a>
                        <a class="nav-link" href="notification_system.html">Notification System</a>
                        <a class="nav-link" href="poll_system.html">Poll System</a>
                        <a class="nav-link" href="pm_system.html">Private Message System</a>
                        <a class="nav-link" href="torrent_system.html">Torrent Request System</a>
                        <a class="nav-link" href="rss_system.html">RSS System</a>
                        <a class="nav-link" href="staff_dashboard.html">Staff Dashboard</a>
                        <a class="nav-link" href="torrent_system.html">Torrent System</a>
                        <a class="nav-link" href="user_system.html">User System</a>
                    </nav>
                </li>

                <!--                <li class="nav-item">-->
                <!--                    <a class="nav-link" href="#">Themes <span class="arrow"></span></a>-->
                <!--                    <nav class="nav">-->
                <!--                        <a class="nav-link" href="light_theme.html">Light</a>-->
                <!--                        <a class="nav-link" href="galactic_theme.html">Galactic</a>-->
                <!--                        <a class="nav-link" href="dark_theme.html">Dark</a>-->
                <!--                    </nav>-->
                <!--                </li>-->

                <li class="nav-item">
                    <a class="nav-link" href="#">Multilingual <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="supported_lang.html">Supported Languages</a>
                    </nav>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">API <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="api_endpoints.html">Endpoints</a>
                    </nav>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Installing <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="automated_install.html">Automated Installer</a>
                        <a class="nav-link" href="manual_install.html">Manual Install</a>
                    </nav>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Updating <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="git_updater.html">Git Updater</a>
                    </nav>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Changelog <span class="arrow"></span></a>
                    <nav class="nav">
                        <a class="nav-link" href="changelog.html">UNIT3D Changelog</a>
                    </nav>
                </li>

            </ul>
        </section>
    </div>
</nav>
<!-- /.navbar -->

<!-- Header -->
<header class="header" style="background-image: linear-gradient(135deg, #f9f7ff 0%, #e4e8ff 50%, #c8ceff 100%);">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1>UNIT3D Manual Install</h1>
                <p class="lead mt-5 mb-8">Thinking about using UNIT3D? This page describes how to manually install
                    UNIT3D.</p>
            </div>
            <div class="col-lg-5 ml-auto d-none d-lg-block">
                <img src="assets/img/vector/2.png" style="height: 300px;" alt="img">
            </div>
        </div>
    </div>
</header>
<!-- /.header -->

<!-- Main Content -->
<main class="main-content">
    <div class="row">
        <div class="container">
            <h2>Manual Install</h2>
            <ul class="clean_lists">
                <li><a href="#ubuntu"># Ubuntu</a></li>
                <li>
                    <ol>
                        <li><a href="#ubuntu-os">Os</a></li>
                        <li><a href="#ubuntu-repos">Repositories</a></li>
                        <li><a href="#ubuntu-required-soft">Required Software</a></li>
                        <li><a href="#ubuntu-php">Configure PHP</a></li>
                        <li><a href="#ubuntu-nginx">Configure Nginx</a></li>
                        <li><a href="#ubuntu-https">HTTPS</a></li>
                        <li>
                            <ol>
                                <li><a href="#ubuntu-https">Let's encrypt</a></li>
                                <li><a href="#ubuntu-http">HTTP only</a></li>
                            </ol>
                        </li>
                        <li><a href="#ubuntu-installation">Installation</a></li>
                        <li><a href="#ubuntu-supervisor">Configure Supervisor</a></li>
                        <li><a href="#ubuntu-enjoy">Enjoy</a></li>
                    </ol>
                </li>
                <li><a href="https://freedif.org/unit3d-how-to-install-a-torrent-tracker">Debian</a></li>
                <li><a href="#arch-linux"># Arch Linux</a></li>
                <li>
                    <ol>
                        <li><a href="#arch-required-soft"> Required Software</a></li>
                        <li><a href="#arch-php"> Configure PHP</a></li>
                        <li><a href="#arch-mariadb">Configure MariaDB</a></li>
                        <li><a href="#arch-nginx"> Configure Nginx</a></li>
                        <li><a href="#arch-daemons"> Daemons</a></li>
                        <li><a href="#arch-firewall"> Configure the firewall</a></li>
                        <li><a href="#arch-installation"> Installation</a></li>
                        <li><a href="#arch-https"> HTTPS</a></li>
                        <li>
                            <ol>
                                <li><a href="#arch-https"> Let's encrypt</a></li>
                                <li><a href="#arch-http"> HTTP only</a></li>
                            </ol>
                        </li>
                        <li><a href="#arch-supervisor"> Configure Supervisor</a></li>
                        <li><a href="#arch-enjoy"> Enjoy</a></li>
                    </ol>
                </li>
                <li><a href="#caddy">Caddy Web Server (Alternative to nginx + certbot)</a></li>
            </ul>
            <h2 id="ubuntu">Ubuntu Instructions</h2>
            <div class="code" id="ubuntu-os">
                <h4>1. Install OS</h4>
                <p>One of the following</p>
                <ul>
                    <li>Ubuntu 20.04.1 LTS (Focal Fossa) (64bit)</li>
                    <li>Ubuntu 18.04.5 LTS (Bionic Beaver) (64bit)</li>
                    <li>Ubuntu 16.04.4 LTS (Xenial Xerus) (64bit) (Not recommended, EOL 2021)</li>
                </ul>
            </div>

            <div class="code" id="ubuntu-repos">
                <h4>2. Repositories</h4>
                <p>Note that these repositories are only required for older OS, you can skip this if you are using
                    Ubuntu 20.04
                <p>
                <pre>sudo add-apt-repository -y ppa:nginx/development</pre>
                <pre>sudo add-apt-repository -y ppa:ondrej/php</pre>
                <pre>sudo apt update</pre>
            </div>

            <div class="code" id="ubuntu-required-soft">
                <h4>3. Required Software</h4>
                <h5>Tools</h5>

                <p>Install standard dependencies</p>
                <pre>sudo apt install git tmux vim curl wget zip unzip htop nano build-essential supervisor redis-server nginx mysql-server</pre>

                <h5>Setup MySQL</h5>
                <pre>sudo mysql_secure_installation</pre>

                <h5>PHP</h5>
                <pre>sudo apt install php-pear php7.4-curl php7.4-dev php7.4-gd php7.4-mbstring php7.4-zip php7.4-mysql php7.4-xml php7.4-fpm php7.4-intl php7.4-bcmath</pre>

                <h5>NodeJS and NPM</h5>
                <pre>curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -</pre>
                <pre>sudo apt install nodejs</pre>

                <h5>Laravel Echo Server (for socket.io and broadcasting)</h5>
                <pre>sudo npm install -g laravel-echo-server</pre>
            </div>

            <div class="code" id="ubuntu-php">
                <h4>4. Configure PHP</h4>
                <pre>sudo nano /etc/php/7.4/fpm/php.ini</pre>
                <p>Find</p>
                <pre>;cgi.fix_pathinfo=1</pre>
                <p>Replace with</p>
                <pre>cgi.fix_pathinfo=0</pre>
                <p>Save and close (CTRL + X)</p>
                <p>Restart php-fpm</p>
                <pre>sudo systemctl restart php7.4-fpm</pre>
            </div>
            <div class="code" id="ubuntu-nginx">
                <h4>5. Configure Nginx</h4>
                <pre>sudo nano /etc/nginx/sites-available/default</pre>
                <p>Append</p>
                <pre>server {
	listen 80 default_server;
	root /var/www/html/public;
	index index.html index.htm index.php;
	server_name yourdomain.com;
	location ~* \.(jpg|jpeg|png|gif|ico|svg)$ {
		expires 365d;
	}
	location ~ \.(gif|png|jpg|jpeg|svg|css|js|ico)$ {
		valid_referers none blocked yourdomain.com www.yourdomain.com;
		if ($invalid_referer) {
		    return   403;
		}
	}
	location / {
		try_files $uri $uri/ /index.php$is_args$args;
	}
	location ~ \.php$ {
		include snippets/fastcgi-php.conf;
		fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
	}
}</pre>
                <p>Save and close</p>
                <p>Restart nginx</p>
                <pre>sudo systemctl reload nginx</pre>
            </div>

            <div class="code border-success" id="ubuntu-https">
                <h4>6.1 Secure Nginx with Let's Encrypt</h4>
                <p>
                    <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04">https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04</a>
                </p>
                <p><b>Note : </b>If you are using ufw or any other firewall you will need to `allow` port `8443` for the
                    next step.</p>
                <p>With ufw</p>
                <pre>sudo ufw allow 8443 && sudo ufw allow ssh && sudo ufw enable</pre>
            </div>
            <div class="code border-danger" id="ubuntu-http">
                <h4>6.2 For HTTP only</h4>
                <p><b>Note : </b>Getting an SSL certificate is free and easy with Let's encrypt.
                    You are higly encouraged to setup HTTPS in your website.</p>
                <p>Edit config/session.php (HTTPS Only Cookies -> false)</p>
                <pre>'secure' => env('SESSION_SECURE_COOKIE', false),</pre>
                <p>Edit config/secure-headers.php (HTTP Strict Transport Security -> false)</p>
                <pre>'hsts' => [
                    'enable' => false,</pre>

                <p>Edit config/secure-headers.php (Content Security Policy -> disabled)</p>
                <pre>'custom-csp' => "",</pre>
            </div>

            <div id="ubuntu-installation">

                <h4>7. Installation</h4>

                <h5>UNIT3D</h5>
                <pre>cd /var/www/html/</pre>
                <pre>git clone https://github.com/HDInnovations/UNIT3D</pre>
                <pre>sudo chown -R www-data: storage bootstrap public config && sudo find . -type d -exec chmod 0775 '{}' + -or -type f -exec chmod 0644 '{}' +</pre>
                <p>Copy .env.example to .env and fill it with your APP, DB, REDIS, API KEYS and MAIL info</p>

                <h5>Composer</h5>
                <pre>php -r "readfile('http://getcomposer.org/installer');" | sudo php -- --install-dir=/usr/bin/ --filename=composer</pre>
                <pre>composer install && composer require predis/predis && npm install && npm install --save-dev socket.io-client && npm run prod</pre>
                <p><b class="border-warning">Note: </b>If you receive a error during <kbd>npm install</kbd> regarding
                    <b>pngquant-bin@4.0.0</b>
                    Or an error similar to</p>
                <pre>... binary doesn't seem to work correctly</pre>
                <p>please run the following commands</p>
                <pre>wget -q -O /tmp/libpng12.deb http://mirrors.kernel.org/ubuntu/pool/main/libp/libpng/libpng12-0_1.2.54-1ubuntu1_amd64.deb</pre>
                <pre>sudo dpkg -i /tmp/libpng12.deb && rm /tmp/libpng12.deb && npm install && npm run prod</pre>

                <h5>Setup CRON</h5>
                <pre>sudo crontab -e</pre>
                <p>Append</p>
                <pre>* * * * * php /var/www/html/artisan schedule:run >> /dev/null 2>&1</pre>
                <p><b>/var/www/html/artisan</b> becomes whatever directory you've set in your nginx config file</p>

                <h5>Set up UNIT3D</h5>
                <p>Generate your site key</p>
                <pre>php artisan key:generate</pre>
                <p>Initialize your database schema</p>
                <pre>php artisan migrate --seed</pre>
                <p>Update permissions</p>
                <pre>sudo chown -R www-data: storage bootstrap public config</pre>
                <p>Setup Echo Server</p>
                <pre>laravel-echo-server init</pre>
                <pre>
The cli tool will help you setup a laravel-echo-server.json
file in the root directory of your project (/usr/share/nginx/html).
This file will be loaded by the server during start up.
You may edit this file later on to manage the configuration of your server.

? Do you want to run this server in development mode? = No (Yes for debug or developement)
? Which port would you like to serve from? = 8443
? Which database would you like to use to store presence channel members? = redis
? Enter the host of your Laravel authentication server. = https://yourdomain.com
? Will you be serving on http or https? = https
? Do you want to generate a client ID/Key for HTTP API? = Yes
? Do you want to setup cross domain access to the API? = No

You should see something like the following :

appId: 73e82e6e1122cb58
key: 95eacbe008a722b247653afba0247c44
                </pre>
                <p>
                    <b>Note : </b><b>Do not run the start command</b>; the server should start
                    automatically after loaded into Supervisor in the next section.</p>

                <div class="code" id="ubuntu-supervisor">
                    <h4>8. Configure Supervisor</h4>
                    <pre>sudo nano /etc/supervisor/conf.d/unit3d.conf</pre>
                    <p>Append</p>

                    <pre>[program:unit3d-queue]
process_name=%(program_name)s_%(process_num)02d
command=php /var/www/html/artisan queue:work --sleep=3 --tries=3
startsecs = 0
autostart=true
autorestart=true
user=www-data
numprocs=2

[program:unit3d-socket-io]
process_name=%(program_name)s_%(process_num)02d
command=/usr/bin/node /usr/bin/laravel-echo-server start --dir=/var/www/html
autostart=true
autorestart=true
user=www-data
numprocs=1</pre>
                    <p><b>Note : </b>Adapt <i>/var/www/html</i> to the root directory of your server</p>
                    <p>Save and close</p>
                    <p>Load new config and start the process</p>
                    <pre>sudo supervisorctl reread && sudo supervisorctl update && sudo supervisorctl reload</pre>
                    <pre>sudo supervisorctl</pre>
                    <p>You should see something like the following:</p>
                    <pre>unit3d-queue:unit3d-queue_00 RUNNING pid 12838, uptime 0:00:10
unit3d-queue:unit3d-queue_01 RUNNING pid 12833, uptime 0:00:10
unit3d-socket-io:unit3d-socket-io_01 RUNNING pid 12828, uptime 0:00:10</pre>
                    <p><b>Note:</b> type exit at the prompt to exit supervisorctl</p>
                    <p>Run</p>
                    <pre>sudo supervisorctl reload</pre>
                </div>

                <div id="ubuntu-enjoy">
                    <h4>9. Enjoy</h4>
                    <p>You can now go to your site's URL</p>
                    <p><b>Note: </b>The default username and password for admin is UNIT3D (set in .env)</p>
                    <p><b>Note: </b>You can edit files in the <kbd>config/</kbd> folder manually or via the
                        config manager in the dashboard</p>
                    <h2>Enjoy using UNIT3D !</h2>
                </div>

                <h2 id="arch-linux">Arch Linux Instructions</h2>
                <div class="code" id="arch-required-soft">
                    <h4>1. Required Software</h4>
                    <h5>Tools</h5>
                    <pre>sudo pacman -S git vim curl zip unzip</pre>
                    <h5>Supervisor</h5>
                    <pre>sudo pacman -S <a href="http://supervisord.org/introduction.html"
                                           target="_blank">supervisor</a></pre>
                    <h5>Redis</h5>
                    <pre>sudo pacman -S <a href="https://wiki.archlinux.org/index.php/redis"
                                           target="_blank">redis</a></pre>

                    <h5>Nginx</h5>
                    <pre>sudo pacman -S nginx php-fpm php-gd php-intl mariadb nodejs npm</pre>

                    <h5>PHP Pear (Aur)</h5>
                    <pre>sudo pacman -S php-pear</pre>

                    <h5>Laravel Echo Server (for socket.io and broadcasting)</h5>
                    <pre>sudo npm install -g laravel-echo-server</pre>
                </div>
                <div class="code" id="arch-php">
                    <h4>2. Configure PHP</h4>

                    <pre>sudo vim /etc/php/php.ini</pre>
                    <p>Uncomment</p>
                    <pre>;extension=bcmath
;extension=gd
;extension=intl
;extension=mysqli
;extension=pdo_mysql
                    </pre>
                    <p>Find (ctrl+w)</p>
                    <pre>;cgi.fix_pathinfo=1</pre>
                    <p>Replace with</p>
                    <pre>cgi.fix_pathinfo=0</pre>
                    <p>Save & close (:wq on vim)</p>
                </div>
                <div id="arch-mariadb">
                    <h4>3. Configure MariaDB</h4>
                    <pre>mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql</pre>
                    <pre>sudo systemctl enable mariadb && sudo systemctl start mariadb</pre>
                    <pre>sudo mysql_secure_installation</pre>
                </div>
                <div id="arch-nginx">
                    <h4>4. Configure Nginx</h4>
                    <h5>Debian like structure</h5>
                    <pre>sudo mkdir /etc/nginx/sites-available && sudo mkdir /etc/nginx/sites-enabled</pre>
                    <p>Edit config file:</p>
                    <pre>sudo vim /etc/nginx/nginx.conf</pre>
                    <p>Append to the end of the http block:</p>
                    <pre>http {
...
    include sites-enabled/*;
}</pre>
                    <h5>UNIT3D configuration</h5>
                    <pre>sudo vim /etc/nginx/sites-available/unit3d.conf</pre>

                    <p>Copy / paste</p>
                    <pre>server {
    listen 80 default_server;
    root /usr/share/nginx/html/UNIT3D/public;
    index index.html index.htm index.php;
    server_name yourdomain.com;
    error_log /var/log/nginx/error.log;
    location ~* .(jpg|jpeg|png|gif|ico|svg)$ {
        expires 365d;
    }
    location ~ .(gif|png|jpg|jpeg|svg|css|js|ico)$ {
        valid_referers none blocked yourdomain.com www.yourdomain.com<;
        if ($invalid_referer) {
            return 403;
        }
    }
    location / {
        try_files $uri $uri/ /index.php$is_args$args;
    }
    location ~ \.php$ {
        include fastcgi.conf;
        fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;
    }
}</pre>
                    <p><b>Note: </b>Replace <i>yourdomain.com</i> with your FQDN</p>
                    <p>Save & close</p>
                    <p>Activate this entry</p>
                    <pre>sudo ln -s /etc/nginx/sites-available/unit3d.conf /etc/nginx/sites-enabled/unit3d.conf</pre>
                    <p>Test the configuration</p>
                    <pre>sudo nginx -t</pre>
                    <p><b>Note : </b>If you get the error <kbd><i>could not build optimal types_hash</i></kbd>
                        append <kbd>types_hash_max_size 4096;</kbd> to your http block in /etc/nginx/nginx.conf
                    </p>
                </div>

                <div class="code" id="arch-daemons">
                    <h4>5. Start / enable newly installed daemons</h4>
                    <pre>sudo systemctl enable ufw cronie supervisord redis nginx php-fpm</pre>
                    <pre>sudo systemctl start ufw cronie supervisord redis nginx php-fpm</pre>
                </div>
                <div class="code" id="arch-firewall">
                    <h4>6. Configure the firewall</h4>
                    <p>Enable the firewall</p>
                    <pre>sudo ufw enable</pre>
                    <p>Allow HTTPS traffic</p>
                    <pre>sudo ufw allow https</pre>
                    <p>For HTTP only traffic</p>
                    <pre>sudo ufw allow http</pre>
                    <p>For the chatbox (socket.io)</p>
                    <pre>sudo ufw allow 8443</pre>
                </div>
                <div class="code" id="arch-installation">
                    <h4>7. Installation</h4>
                    <h5>UNIT3D</h5>
                    <pre>cd /usr/share/nginx/html</pre>
                    <pre>sudo git clone https://github.com/HDInnovations/UNIT3D</pre>
                    <pre>sudo chown -R <i>current-user</i>: UNIT3D/</pre>
                    <p>(replace <i>current-user</i></p>
                    <pre>cd UNIT3D/</pre>

                    <h5>Composer</h5>
                    <p>Copy .env.example to .env and fill it with your APP, DB, REDIS, API KEYS and
                        MAIL info</p>
                    <pre>cp .env.example .env</pre>
                    <pre>php -r "readfile('http://getcomposer.org/installer');" | sudo php --install-dir=/usr/bin/ --filename=composer</pre>
                    <pre>composer install && composer require predis/predis && npm install && npm install --save-dev socket.io-client && npm run prod</pre>
                    <pre>sudo chown -R http: storage bootstrap public config && sudo find . -type d -exec chmod 0755 '{}' + -or -type f -exec chmod 0644 '{}' +</pre>
                    <h5>Setup CRON</h5>
                    <pre>sudo crontab -e</pre>
                    <p>Append</p>
                    <pre>* * * * * php <i>/usr/share/nginx/html/UNIT3D/artisan</i> schedule:run >> /dev/null 2>&1</pre>
                    <p><i>/usr/share/nginx/html/UNIT3D/artisan</i> becomes whatever directory you've set in your nginx
                        config file</p>
                    <h5>Set up UNIT3D</h5>
                    <pre>php artisan key:generate</pre>
                    <pre>php artisan migrate --seed</pre>
                    <pre>laravel-echo-server init</pre>
                    <pre>
The cli tool will help you setup a laravel-echo-server.json
file in the root directory of your project (/usr/share/nginx/html).
This file will be loaded by the server during start up.
You may edit this file later on to manage the configuration of your server.

? Do you want to run this server in development mode? = No (Yes for debug or developement)
? Which port would you like to serve from? = 8443
? Which database would you like to use to store presence channel members? = redis
? Enter the host of your Laravel authentication server. = https://yourdomain.com
? Will you be serving on http or https? = https
? Do you want to generate a client ID/Key for HTTP API? = Yes
? Do you want to setup cross domain access to the API? = No

You should see something like the following :

appId: 73e82e6e1122cb58
key: 95eacbe008a722b247653afba0247c44
                </pre>
                    <p>
                        <b>Note : </b><b>Do not run the start command</b>; the server should start
                        automatically after loaded into Supervisor in the next section.</p>
                    <pre>sudo chown -R http: .</pre>
                </div>
                <div class="code border-success" id="arch-https">
                    <h4>8.1 Secure Nginx with Let's Encrypt</h4>
                    <p>Install Certbot</p>
                    <pre>sudo pacman -S certbot certbot-nginx</pre>
                    <p>Create the certificates</p>
                    <pre>sudo certbot --nginx -d <i>yourdomain.com</i> -d <i>www.yourdomain.com</i></pre>
                    <p>Enable auto-renewal</p>
                    <pre>sudo vim /etc/cron.daily/certbot-renew.sh</pre>
                    <p>Append</p>
                    <pre>#!/bin/bash

certbot renew --pre-hook "systemctl stop nginx" --post-hook "systemctl reload nginx"</pre>
                    <p>Save & close</p>
                    <p><b>Note : </b>If you are using SSL (HTTPS), you will want to make sure that
                        the certificate files are readable by the user running the echo server.
                        For example if you are using LetsEncrypt for SSL, you may need to run a command like :</p>
                    <pre>sudo chown http /etc/letsencrypt -R</pre>
                </div>
                <div class="code border-danger" id="arch-http">
                    <h4>8.1 For HTTP only</h4>
                    <p><b>Note : </b>Getting an SSL certificate is free and easy with Let's encrypt.
                        You are higly encouraged to setup HTTPS in your website.</p>
                    <p>Edit config/session.php (HTTPS Only Cookies -> false)</p>
                    <pre>'secure' => env('SESSION_SECURE_COOKIE', false),</pre>
                    <p>Edit config/secure-headers.php (HTTP Strict Transport Security -> false)</p>
                    <pre>'hsts' => [
    'enable' => false,</pre>
                    <p>Edit config/secure-headers.php (Content Security Policy -> disabled)</p>
                    <pre>'custom-csp' => "",</pre>
                </div>
                <div class="code" id="arch-supervisor">
                    <h4>9. Configure Supervisor</h4>
                    <pre>sudo vim /etc/supervisor.d/unit3d.ini</pre>

                    <pre>[program:unit3d-queue]
process_name=%(program_name)s_%(process_num)02d
command=php /usr/share/nginx/html/UNIT3D/artisan queue:work --sleep=3 --tries=3
startsecs = 0
autostart=true
autorestart=true
user=http
numprocs=2

[program:unit3d-socket-io]
process_name=%(program_name)s_%(process_num)02d
command=/usr/bin/node /usr/bin/laravel-echo-server start --dir=/usr/share/nginx/html/UNIT3D
autostart=true
autorestart=true
user=http
numprocs=1</pre>

                    <p><b>Note : </b>Adapt <kbd>/var/www/html</kbd> to the root directory of your server</p>
                    <p>Save and close</p>
                    <p>Load new config and start the process</p>
                    <pre>sudo supervisorctl reread && sudo supervisorctl update && sudo supervisorctl reload</pre>
                    <p>You should see something like the following :</p>
                    <pre>unit3d-queue:unit3d-queue_00 RUNNING pid 12838, uptime 0:00:10
unit3d-queue:unit3d-queue_01 RUNNING pid 12833, uptime 0:00:10
unit3d-socket-io:unit3d-socket-io_01 RUNNING pid 12828, uptime 0:00:10</pre>
                    <p><b>Note:</b> type exit at the prompt to exit supervisorctl</p>
                    <p>Run</p>
                    <pre>sudo supervisorctl reload</pre>
                </div>
                <div class="code border-success" id="arch-enjoy">
                    <h4>10. Enjoy</h4>
                    <p>You can now go to your site's URL</p>
                    <p><b>Note : </b>The default username and password for admin is UNIT3D (set in .env)</p>
                    <p><b>Note : </b>You can edit files in the <kbd>config/</kbd> folder manually or via the
                        config manager in the dashboard</p>
                    <h2>Enjoy using UNIT3D !</h2>
                </div>


                <div class="code" id="caddy">
                    <h4>Configure Caddy &amp; Let's Encrypt</h4>
                    <p>You can optionally use <a href="https://caddyserver.com/">Caddy</a> instead of the
                        default nginx option if you prefer. It provides automatic ACME cert registration and renewals
                        meaning
                        you can skip the certbot and nginx portions of the above instructions</p>
                    <p>This setup will only use a single exposed HTTP port and reverse proxy to the appropriate
                        handlers.</p>
                    <p>If you are listening on a port you can use this config for a base, otherwise use the one beneath
                        it
                        for the more traditional .sock based FPM config</p>
                    <pre>yoursite.com {
    root * /app/public
    log {
        output file /var/log/caddy/yoursite.access.log {
        	roll_size 10MiB
	        roll_keep 5
	        roll_keep_for 48h
        }
        format console
    }
    // Should point to the port you configured for laravel-echo-server
    proxy /socket.io/ localhost:8443 {
        header_upstream Host {host}
        header_upstream X-Real-IP {remote}
        header_upstream X-Forwarded-For {remote}
        websocket
    }
    file_server
    encode gzip zstd
    # Port based fcgi listener for things like docker or separate server instances
    # php_fastcgi app:9000
    # Standard unix domain socket based config
    php_fastcgi unix//var/run/php-fpm/php-fpm.sock
    # Email for Let's encrypt
    tls xxx@host.com {
        # Uncomment for testing cert generation
        # ca https://acme-staging-v02.api.letsencrypt.org/directory
    	protocols tls1.2 tls1.3
    }
}
                </pre>

                    <p>By default unit3d will use port 8443 for socket.io connections. When proxying over the same HTTPS
                        port (443), you must change this.</p>
                    <p>Open <kbd>resources/js/bootstrap.js</kbd> and change window.Echo to the following</p>
                    <pre>window.Echo = new Echo({
    broadcaster: 'socket.io',
    host: window.location.hostname,
});</pre>


                    </pre>
                </div>
            </div>
        </div>
    </div>
</main>
<!-- /.main-content -->

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row gap-y align-items-center">
            <div class="col-md-12 text-center text-md-right">
                <a href="#">Â© UNIT3D Docs</a>
            </div>
        </div>
    </div>
</footer><!-- /.footer -->


<!-- Scripts -->
<script src="assets/js/page.min.js"></script>
<script src="assets/js/script.js"></script>

</body>
</html>
